{"version":3,"file":"vue.js","sources":["../../src/util/env.js","../../src/util/lang.js","../../src/util/index.js","../../src/observe/array.js","../../src/observe/index.js","../../src/state.js","../../src/compiler/parser-html.js","../../src/compiler/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export const hasProto = \"__proto__\" in {};\n","export function def(obj, key, value) {\n  Object.defineProperty(obj, key, {\n    enumerable: false,\n    configurable: false,\n    value,\n  });\n}\n","export * from \"./env\";\nexport * from \"./lang\";\nexport function isObject(data) {\n  return typeof data === \"object\" && data !== null;\n}\n","//value.__proto__=arrayMethods; 原型链向上查找，找不到再往上\n//arrayMethods.__proto__=arrayProto\n//Object.create(proto, [propertiesObject])\nconst arrayProto = Array.prototype;\nexport const arrayMethods = Object.create(arrayProto);\nconst methodsToPatch = [\n  \"push\", //向数组的末尾添加一个或更多元素，并返回新的长度\n  \"pop\", //删除并返回数组的最后一个元素\n  \"shift\", //删除并返回数组的第一个元素\n  \"unshift\", //向数组的开头添加一个或更多元素，并返回新的长度。\n  \"splice\", //删除元素，并向数组添加新元素。(2,3,\"value\"  从第二个开始删除3个，第2个之后添加value)\n  \"sort\", //对数组的元素进行排序\n  \"reverse\", //颠倒数组中元素的顺序。\n];\nmethodsToPatch.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    arrayProto[method].apply(this, args);\n    const ob = this.__ob__;\n    let inserted;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n    // console.log(\"args\", args);\n  };\n});\n","import { isObject, hasProto, def } from \"../util/index.js\";\nimport { arrayMethods } from \"./array\";\nexport function observe(data) {\n  let isObj = isObject(data);\n  if (!isObj) {\n    return;\n  }\n  return new Observer(data);\n}\nexport class Observer {\n  constructor(value) {\n    //如果是数组并不会对索引进行观测，会导致消耗过大，性能问题\n    //前端开发很少操作索引,如果对象里放置的对象进行监控\n    //对数组的对象进行劫持、对操作数组的方法进行重写（push shift unshift）\n    def(value, \"__ob__\", this);\n    if (Array.isArray(value)) {\n      if (hasProto) {\n        protoAugment(value, arrayMethods);\n      } else {\n        console.log(\"no hasProto\");\n      }\n      this.observeArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n  //遍历数组\n  observeArray(items) {\n    for (let i = 0; i < items.length; i++) {\n      observe(items[i]);\n    }\n  }\n  //遍历对象\n  walk(value) {\n    let keys = Object.keys(value);\n    keys.forEach((key) => {\n      defineReactive(value, key);\n    });\n  }\n}\n\nexport function protoAugment(value, src) {\n  value.__proto__ = src;\n}\n\nexport function defineReactive(obj, key, val) {\n  const property = Object.getOwnPropertyDescriptor(obj, key);\n  const getter = property && property.get;\n  const setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n  observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get() {\n      console.log(\"触发了get\");\n      const value = getter ? getter.call(obj) : val;\n      return value;\n    },\n    set(newVal) {\n      const value = getter ? getter.call(obj) : val;\n      if (newVal === value) {\n        return;\n      }\n      val = setter ? setter.call(obj, newVal) : newVal;\n      // console.log(\"newVal==\", newVal);\n      observe(newVal);\n    },\n  });\n}\n","import { observe } from \"./observe/index.js\";\nexport function initState(vm) {\n  const opts = vm.$options;\n  //数据来源 属性 方法 数据  计算属性 watch\n  if (opts.props) {\n    initProps(vm, opts.props);\n  }\n  if (opts.methods) {\n    initMethods(vm, opts.props);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n  if (opts.computed) initComputed(vm, opts.computed);\n  if (opts.watch) {\n    initWatch(vm, opts.watch);\n  }\n}\nfunction initProps(vm, propsOptions) {}\nfunction initMethods(vm, methods) {}\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\n  //mvvm模式:数据变化驱动视图变化\n  observe(data);\n}\nfunction initComputed(vm, computed) {}\nfunction initWatch(vm, watch) {}\n","export const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\nconst startTagClose = /^\\s*(\\/?)>/;\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nconst whitespaceRE = /\\s+/g;\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\nlet currentParent,\n  root,\n  stack = [];\nexport function parseHTML(html) {\n  //indexOf :可返回某个指定的字符串值在字符串中首次出现的位置\n  while (html) {\n    let text;\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd === 0) {\n      let startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMathch = html.match(endTag);\n      if (endTagMathch) {\n        advance(endTagMathch[0].length);\n        end(endTagMathch[1]);\n        continue;\n      }\n    } else if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n      if (text) {\n        advance(text.length);\n        chars(text);\n      }\n    }\n  }\n  function advance(n) {\n    html = html.substring(n);\n  }\n  function parseStartTag() {\n    let start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      let end, attr;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length);\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n      }\n      if (end) {\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n  return root;\n}\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName, attrs);\n  if (!root) {\n    root = element;\n    console.log(\"root====\", root);\n  }\n  currentParent = element;\n  stack.push(element);\n}\n//标签  属性  父亲\nfunction createASTElement(tag, attrs, parent) {\n  return {\n    tag: tag,\n    type: ELEMENT_TYPE,\n    children: [],\n    attrs,\n    parent: null,\n  };\n}\nfunction chars(text) {\n  text = text.replace(whitespaceRE, \"\");\n  if (text) {\n    let child = {\n      text: text,\n      type: TEXT_TYPE,\n    };\n    currentParent.children.push(child);\n  }\n}\nfunction end(tagName) {\n  let element = stack.pop();\n  if (element.tag === tagName) {\n    currentParent = stack[stack.length - 1];\n    if (currentParent) {\n      element.parent = currentParent;\n      currentParent.children.push(element);\n    }\n  }\n}\n","//ast 语法树  是用对象来描述原生语法  虚拟dom用对象来描述dom节点\nimport { parseHTML } from \"./parser-html\";\nexport function compileToFunctions(template) {\n  //解析html字符串，将html字符串=>ast语法树\n  let root = parseHTML(template);\n  //ast语法树转为render函数，字符串拼接（模板引擎）\n  return function render() {};\n}\n","import Vue from \".\";\nimport { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index.js\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    //初始化状态\n    initState(vm);\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      //template转换为render方法\n      const render = compileToFunctions(template);\n      options.render = render;\n    }\n  };\n}\n","import { initMixin } from \"./init\";\nfunction Vue(options) {\n  this._init(options);\n}\ninitMixin(Vue);\nexport default Vue;\n"],"names":["hasProto","def","obj","key","value","Object","defineProperty","enumerable","configurable","isObject","data","arrayProto","Array","prototype","arrayMethods","create","methodsToPatch","forEach","method","args","apply","ob","__ob__","inserted","slice","observeArray","observe","isObj","Observer","isArray","protoAugment","console","log","walk","items","i","length","keys","defineReactive","src","__proto__","val","property","getOwnPropertyDescriptor","getter","get","setter","set","arguments","call","newVal","initState","vm","opts","$options","props","initProps","methods","initMethods","initData","computed","initComputed","watch","initWatch","propsOptions","_data","unicodeRegExp","attribute","ncname","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","whitespaceRE","ELEMENT_TYPE","TEXT_TYPE","currentParent","root","stack","parseHTML","html","text","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMathch","match","advance","end","substring","chars","n","attr","push","name","element","createASTElement","tag","parent","type","children","replace","child","pop","compileToFunctions","template","render","initMixin","Vue","_init","options","el","$mount","document","querySelector","outerHTML"],"mappings":"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"}