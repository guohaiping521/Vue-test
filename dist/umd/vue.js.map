{"version":3,"file":"vue.js","sources":["../../src/util/env.js","../../src/util/lang.js","../../src/util/index.js","../../src/observe/array.js","../../src/observe/index.js","../../src/state.js","../../src/compiler/parser-html.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/observe/watcher.js","../../src/vdom/patch.js","../../src/instance/lifecycle.js","../../src/init.js","../../src/vdom/vnode.js","../../src/vdom/create-element.js","../../src/instance/render.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["export const hasProto = \"__proto__\" in {};\n","export function def(obj, key, value) {\n  Object.defineProperty(obj, key, {\n    enumerable: false,\n    configurable: false,\n    value,\n  });\n}\n","export * from \"./env\";\nexport * from \"./lang\";\nexport function isObject(data) {\n  return typeof data === \"object\" && data !== null;\n}\nexport function proxy(vm, sourse, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[sourse][key];\n    },\n    set(newVal) {\n      vm[\"_data\"][key] = newVal;\n    },\n  });\n}\nlet strats = Object.create(null);\nlet LIFECYCLE_HOOKS = [\n  \"beforeCreate\",\n  \"created\",\n  \"beforeMount\",\n  \"mounted\",\n  \"beforeUpdate\",\n  \"updated\",\n  \"beforeDestroy\",\n  \"destroyed\",\n  \"activated\",\n  \"deactivated\",\n  \"errorCaptured\",\n  \"serverPrefetch\",\n];\nLIFECYCLE_HOOKS.forEach((hook) => {\n  strats[hook] = mergeHook;\n});\nfunction mergeHook(parentVal, childVal) {\n  if (childVal) {\n    if (parentVal) {\n      return parentVal.concat(childVal);\n    } else {\n      if (Array.isArray(childVal)) {\n        return childVal;\n      } else {\n        return [childVal];\n      }\n    }\n  } else {\n    return parentVal;\n  }\n}\nexport function mergeOptions(parent, child) {\n  let options = {};\n  for (let key in parent) {\n    mergeField(key);\n  }\n  for (const key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField(key) {\n    if (strats[key]) {\n      options[key] = strats[key](parent[key], child[key]);\n      return;\n    }\n    if (typeof parent[key] === \"object\" && typeof child[key] === \"object\") {\n      options[key] = {\n        ...parent[key],\n        ...child[key],\n      };\n    } else if (child[key] == null) {\n      options[key] = parent[key];\n    } else {\n      options[key] = child[key];\n    }\n  }\n  return options;\n}\n","//value.__proto__=arrayMethods; 原型链向上查找，找不到再往上\n//arrayMethods.__proto__=arrayProto\n//Object.create(proto, [propertiesObject])\nconst arrayProto = Array.prototype;\nexport const arrayMethods = Object.create(arrayProto);\nconst methodsToPatch = [\n  \"push\", //向数组的末尾添加一个或更多元素，并返回新的长度\n  \"pop\", //删除并返回数组的最后一个元素\n  \"shift\", //删除并返回数组的第一个元素\n  \"unshift\", //向数组的开头添加一个或更多元素，并返回新的长度。\n  \"splice\", //删除元素，并向数组添加新元素。(2,3,\"value\"  从第二个开始删除3个，第2个之后添加value)\n  \"sort\", //对数组的元素进行排序\n  \"reverse\", //颠倒数组中元素的顺序。\n];\nmethodsToPatch.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    arrayProto[method].apply(this, args);\n    const ob = this.__ob__;\n    let inserted;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n  };\n});\n","import { isObject, hasProto, def } from \"../util/index.js\";\nimport { arrayMethods } from \"./array\";\nexport function observe(data) {\n  let isObj = isObject(data);\n  if (!isObj) {\n    return;\n  }\n  return new Observer(data);\n}\nexport class Observer {\n  constructor(value) {\n    //如果是数组并不会对索引进行观测，会导致消耗过大，性能问题\n    //前端开发很少操作索引,如果对象里放置的对象进行监控\n    //对数组的对象进行劫持、对操作数组的方法进行重写（push shift unshift）\n    def(value, \"__ob__\", this);\n    if (Array.isArray(value)) {\n      if (hasProto) {\n        protoAugment(value, arrayMethods);\n      } else {\n        console.log(\"no hasProto\");\n      }\n      this.observeArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n  //遍历数组\n  observeArray(items) {\n    for (let i = 0; i < items.length; i++) {\n      observe(items[i]);\n    }\n  }\n  //遍历对象\n  walk(value) {\n    let keys = Object.keys(value);\n    keys.forEach((key) => {\n      defineReactive(value, key);\n    });\n  }\n}\n\nexport function protoAugment(value, src) {\n  value.__proto__ = src;\n}\n\nexport function defineReactive(obj, key, val) {\n  const property = Object.getOwnPropertyDescriptor(obj, key);\n  const getter = property && property.get;\n  const setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n  observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get() {\n      const value = getter ? getter.call(obj) : val;\n      return value;\n    },\n    set(newVal) {\n      const value = getter ? getter.call(obj) : val;\n      if (newVal === value) {\n        return;\n      }\n      val = setter ? setter.call(obj, newVal) : newVal;\n      observe(newVal);\n    },\n  });\n}\n","import { observe } from \"./observe/index.js\";\nimport { proxy } from \"./util/index.js\";\nexport function initState(vm) {\n  const opts = vm.$options;\n  //数据来源 属性 方法 数据  计算属性 watch\n  if (opts.props) {\n    initProps(vm, opts.props);\n  }\n  if (opts.methods) {\n    initMethods(vm, opts.props);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n  if (opts.computed) initComputed(vm, opts.computed);\n  if (opts.watch) {\n    initWatch(vm, opts.watch);\n  }\n}\nfunction initProps(vm, propsOptions) {}\nfunction initMethods(vm, methods) {}\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\n  for (const key in vm._data) {\n    proxy(vm, \"_data\", key);\n  }\n  //mvvm模式:数据变化驱动视图变化\n  observe(data);\n}\nfunction initComputed(vm, computed) {}\nfunction initWatch(vm, watch) {}\n","export const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\nconst startTagClose = /^\\s*(\\/?)>/;\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nconst whitespaceRE = /\\s+/g;\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\nlet currentParent,\n  root,\n  stack = [];\nexport function parseHTML(html) {\n  //indexOf :可返回某个指定的字符串值在字符串中首次出现的位置\n  while (html) {\n    let text;\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd === 0) {\n      let startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMathch = html.match(endTag);\n      if (endTagMathch) {\n        advance(endTagMathch[0].length);\n        end(endTagMathch[1]);\n        continue;\n      }\n    } else if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n      if (text) {\n        advance(text.length);\n        chars(text);\n      }\n    }\n  }\n  function advance(n) {\n    html = html.substring(n);\n  }\n  function parseStartTag() {\n    let start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      let end, attr;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length);\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n      }\n      if (end) {\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n  return root;\n}\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName, attrs);\n  if (!root) {\n    root = element;\n  }\n  currentParent = element;\n  stack.push(element);\n}\n//标签  属性  父亲\nfunction createASTElement(tag, attrs, parent) {\n  return {\n    tag: tag,\n    type: ELEMENT_TYPE,\n    children: [],\n    attrs,\n    parent: null,\n  };\n}\nfunction chars(text) {\n  text = text.replace(whitespaceRE, \"\");\n  if (text) {\n    let child = {\n      text: text,\n      type: TEXT_TYPE,\n    };\n    currentParent.children.push(child);\n  }\n}\nfunction end(tagName) {\n  let element = stack.pop();\n  if (element.tag === tagName) {\n    currentParent = stack[stack.length - 1];\n    if (currentParent) {\n      element.parent = currentParent;\n      currentParent.children.push(element);\n    }\n  }\n}\n","//找到{{abc}}这样的.+的意义是最小匹配, 找到符合的马上结束\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nexport function generate(el) {\n  let children = getChildren(el);\n  let code = `_c(\"${el.tag}\",${\n    el.attrs.length ? genProps(el.attrs) : \"undefined\"\n  },${children ? children : \"\"})`;\n  return code;\n}\nfunction getChildren(el) {\n  let children = el.children;\n  if (children && children.length > 0) {\n    return `${children.map((c) => gen(c))}`;\n  } else {\n    return false;\n  }\n}\nfunction gen(child) {\n  //元素标签\n  if (child.type === 1) {\n    return generate(child);\n  } else {\n    let text = child.text;\n    let tokens = [];\n    let lastIndex = (defaultTagRE.lastIndex = 0);\n    let match, index;\n    while ((match = defaultTagRE.exec(text))) {\n      index = match.index;\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      tokens.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n    return `_v(${tokens.join(\"+\")})`;\n  }\n}\nfunction genProps(attrs) {\n  let str = \"\";\n  for (let index = 0; index < attrs.length; index++) {\n    let attr = attrs[index];\n    if (attr.name === \"style\") {\n      let obj = {};\n      attr.value.split(\";\").forEach((element) => {\n        let [key, value] = element.split(\":\");\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n\n  return `{${str.slice(0, -1)}}`;\n}\n","//ast 语法树  是用对象来描述原生语法  虚拟dom用对象来描述dom节点\nimport { parseHTML } from \"./parser-html\";\nimport { generate } from \"./generate\";\nexport function compileToFunctions(template) {\n  //解析html字符串，将html字符串=>ast语法树\n  let root = parseHTML(template);\n  let code = generate(root);\n  //所有模板引擎的实现都需要new Function +with\n  let renderFn = new Function(`with(this){ return ${code}}`);\n  //ast语法树转为render函数，字符串拼接（模板引擎）\n  //ast转为js的语法\n  return renderFn;\n}\n","export default class Watcher {\n  constructor() {}\n}\n","export function patch(oldVnode, vnode) {\n  //元素节点 nodeType 1   属性节点 nodeType 2\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) {\n    const oldElm = oldVnode;\n    const parentElm = oldElm.parentNode;\n    let el = createElm(vnode);\n    parentElm.insertBefore(el, oldElm.nextSibling);\n    parentElm.removeChild(oldElm);\n    return el;\n  }\n}\nfunction createElm(vnode) {\n  const { tag, children, text } = vnode;\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    updateProperties(vnode);\n    children.forEach((child) => {\n      vnode.el.appendChild(createElm(child));\n    });\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\nfunction updateProperties(vnode) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n  for (let key in newProps) {\n    if (key === \"style\") {\n      for (let styleName in newProps.style) {\n        el.style[styleName.trim()] = newProps.style[styleName];\n      }\n    } else if (key === \"class\") {\n      el.className = newProps.class;\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}\n","import Watcher from \"../observe/watcher\";\nimport { patch } from \"../vdom/patch\";\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode); //用虚拟节点创建出真实节点，替换掉真实的el节点\n  };\n}\nexport function mountComponent(vm, el) {\n  vm.$el = el;\n  callHook(vm, \"beforeMount\");\n  //渲染页面\n  let updateComponent = () => {\n    //vm._render()通过render方法返回虚拟dom，然后进行更新\n    vm._update(vm._render());\n  };\n  //渲染watcher，视图变化，渲染更新  true代表他是一个渲染的Watcher\n  new Watcher(vm, updateComponent, () => {}, true);\n  updateComponent();\n  callHook(vm, \"mounted\");\n}\nexport function callHook(vm, hook) {\n  const handers = vm.$options[hook];\n  if (handers) {\n    handers.forEach((option) => {\n      option.call(vm);\n    });\n  }\n}\n","import Vue from \".\";\nimport { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index.js\";\nimport { mountComponent } from \"./instance/lifecycle\";\nimport { mergeOptions } from \"./util/index\";\nimport { callHook } from \"./instance/lifecycle\";\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = mergeOptions(vm.constructor.options, options);\n    callHook(vm, \"beforeCreate\");\n    //初始化状态\n    initState(vm);\n    callHook(vm, \"created\");\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      //template转换为render方法\n      const render = compileToFunctions(template);\n      options.render = render;\n    }\n    mountComponent(vm, el);\n  };\n}\n","export default class VNode {\n  constructor(tag, data, children, text) {\n    this.tag = tag;\n    this.data = data;\n    this.children = children;\n    this.text = text;\n  }\n}\nexport function createTextVNode(val) {\n  return new VNode(undefined, undefined, undefined, val);\n}\n","import VNode from \"./vnode\";\n\nexport function createElement(tag, data = {}, ...children) {\n  return new VNode(tag, data, children, undefined);\n}\n","import { createElement } from \"../vdom/create-element\";\nimport { createTextVNode } from \"../vdom/vnode\";\nexport function renderMixin(Vue) {\n  //创建元素虚拟节点\n  Vue.prototype._c = function () {\n    return createElement(...arguments);\n  };\n  //创建文本的虚拟节点\n  Vue.prototype._v = function (val) {\n    return createTextVNode(val);\n  };\n  //JSON.stringify\n  Vue.prototype._s = function (val) {\n    return val == null\n      ? \"\"\n      : typeof val === \"object\"\n      ? JSON.stringify(val)\n      : val;\n  };\n  Vue.prototype._render = function () {\n    const vm = this;\n    const { render } = vm.$options;\n    return render.call(vm);\n  };\n}\n","import { mergeOptions } from \"../util/index\";\nexport function initGlobalAPI(Vue) {\n  Vue.options = {};\n  Vue.mixin = function (mixin) {\n    //实现对象合并\n    this.options = mergeOptions(this.options, mixin);\n  };\n  Vue.mixin({\n    a: 1,\n    beforeCreate() {\n      console.log(1);\n    },\n  });\n  Vue.mixin({\n    b: 2,\n    beforeCreate() {\n      console.log(2);\n    },\n  });\n}\n","import { initMixin } from \"./init\";\nimport { renderMixin } from \"./instance/render\";\nimport { lifecycleMixin } from \"./instance/lifecycle\";\nimport { initGlobalAPI } from \"./initGlobalAPI/index\";\nfunction Vue(options) {\n  this._init(options);\n}\ninitMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\ninitGlobalAPI(Vue);\nexport default Vue;\n\n//将template转换成ast语法树--》生成render方法--》生成虚拟DOM-->真实的dom\n//重新生成虚拟dom-->更新dom\n"],"names":["hasProto","def","obj","key","value","Object","defineProperty","enumerable","configurable","isObject","data","proxy","vm","sourse","get","set","newVal","strats","create","LIFECYCLE_HOOKS","forEach","hook","mergeHook","parentVal","childVal","concat","Array","isArray","mergeOptions","parent","child","options","mergeField","hasOwnProperty","arrayProto","prototype","arrayMethods","methodsToPatch","method","args","apply","ob","__ob__","inserted","slice","observeArray","observe","isObj","Observer","protoAugment","console","log","walk","items","i","length","keys","defineReactive","src","__proto__","val","property","getOwnPropertyDescriptor","getter","setter","arguments","call","initState","opts","$options","props","initProps","methods","initMethods","initData","computed","initComputed","watch","initWatch","propsOptions","_data","unicodeRegExp","attribute","ncname","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","whitespaceRE","ELEMENT_TYPE","TEXT_TYPE","currentParent","root","stack","parseHTML","html","text","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMathch","match","advance","end","substring","chars","n","attr","push","name","element","createASTElement","tag","type","children","replace","pop","defaultTagRE","generate","el","getChildren","code","genProps","map","c","gen","tokens","lastIndex","index","exec","JSON","stringify","trim","join","str","split","compileToFunctions","template","renderFn","Function","Watcher","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","handers","option","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","VNode","createTextVNode","undefined","renderMixin","_c","_v","_s","initGlobalAPI","mixin","a","beforeCreate","b"],"mappings":"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"}